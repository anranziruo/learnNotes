## 内容
### redis底层实现
```
Redis的五大数据类型也称五大数据对象；前面介绍过6大数据结构，Redis并没有直接使用这些结构来实现键值对数据库，而是使用这些结构构建了一个对象系统redisObject；这个对象系统包含了五大数据对象，字符串对象（string）、列表对象（list）、哈希对象（hash）、集合（set）对象和有序集合对象（zset）；而这五大对象的底层数据编码可以用命令OBJECT ENCODING来进行查看。
```
### 结构具体实现
```
不同类型的不同实现
类型	编码
STRING（字符串）	INT（整型）
STRING（字符串）	EMBSTR（简单动态字符串）
STRING（字符串）	RAW（简单动态字符串）
LIST（列表）	QUICKLIST（快表）
LIST（列表）	LINKEDLIST（快表）
SET（集合）	INTSET（整数集合）
SET（集合）	HT（哈希表）
ZSET（有序集合）	ZIPLIST（压缩列表）
ZSET（有序集合）	SKIPLIST（跳表）
HASH（哈希）	ZIPLIST（压缩列表）
HASH（哈希）	HT（哈希表）
```
### string
```
字符串对象底层数据结构实现为简单动态字符串（SDS）和直接存储，但其编码方式可以是int、raw或者embstr，区别在于内存结构的不同
int:
字符串保存的是整数值，并且这个正式可以用long类型来表示，那么其就会直接保存在redisObject的ptr属性里，并将编码设置为int
raw编码:
字符串保存的大于32字节的字符串值，则使用简单动态字符串（SDS）结构，并将编码设置为raw，此时内存结构与SDS结构一致，内存分配次数为两次，创建redisObject对象和sdshdr结构
embstr编码:
字符串保存的小于等于32字节的字符串值，使用的也是简单的动态字符串（SDS结构），但是内存结构做了优化，用于保存顿消的字符串；内存分配也只需要一次就可完成，分配一块连续的空间即可
struct sdshdr {
    int len;     // len表示buf中存储的字符串的长度
    int free;    // free表示buf中空闲空间的长度
    char buf[];  // buf用于存储字符串内容<br>
}
注意: 创建字符串串的时候capacity和len是一样的大写,默认不会给冗余空间,因为绝大多数场景不会使用append来修改字符串.
结构:正常字符串为字符数组结构,但是redis是维护一个成为sds的数据结构.好处就不用遍历算字符串的长度.
扩容:
小于1m加倍扩容,大于1m则只扩容1m.
```
### list
```
ziplist编码的哈希随想底层实现是压缩列表，每个压缩里列表节点保存了一个列表元素。
linkedlist编码底层采用双端链表实现，每个双端链表节点都保存了一个字符串对象，在每个字符串对象内保存了一个列表元素。
列表对象使用ziplist编码需要满足两个条件：一是所有字符串长度都小于64字节，二是元素数量小于512
```
### 哈希对象(hash)
```
哈希对象的编码可以是ziplist和hashtable之一
ziplist编码的哈希对象底层实现是压缩列表，在ziplist编码的哈希对象中，key-value键值对是以紧密相连的方式放入压缩链表的，先把key放入表尾，再放入value；键值对总是向表尾添加
hashtable编码的哈希对象底层实现是字典，哈希对象中的每个key-value对都使用一个字典键值对来保存。
字典键值对即是，字典的键和值都是字符串对象，字典的键保存key-value的key，字典的值保存key-value的value。
```
### set
```
集合对象的编码可以是intset和hashtable之一。
intset编码的集合对象底层实现是整数集合，所有元素都保存在整数集合中。
hashtable编码的集合对象底层实现是字典，字典的每个键都是一个字符串对象，保存一个集合元素，不同的是字典的值都是NULL；可以参考java中的hashset结构。
```
### 有序集合对象
```
有序集合的编码可以是ziplist和skiplist之一。
ziplist编码的有序集合对象底层实现是压缩列表，其结构与哈希对象类似，不同的是两个紧密相连的压缩列表节点，第一个保存元素的成员，第二个保存元素的分值，而且分值小的靠近表头，大的靠近表尾。
skiplist编码的有序集合对象底层实现是跳跃表和字典两种；
每个跳跃表节点都保存一个集合元素，并按分值从小到大排列；节点的object属性保存了元素的成员，score属性保存分值；
字典的每个键值对保存一个集合元素，字典的键保存元素的成员，字典的值保存分值。
```
* [参考文档](https://blog.csdn.net/ds1130071727/article/details/93366266)